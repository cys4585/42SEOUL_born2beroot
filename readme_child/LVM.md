# LVM (저장장치 관리)

# 용어

## 1. 디스크(Disk)

### 1.1 개념

시스템에 장착되어 있는 물리적인 저장장치

### 1.2. 디스크 종류

1. 고정디스크(HDD, SSD)
    - 메인보드에 직접 연결되어 있는 하드디스크, 주기억장치에 생성된 램디스크
2. 이동식 디스크(USB)
    - 시스템에 언제든지 탈부착할 수 있는 형식의 디스크
3. 가상 디스크
    - 다른 저장매체에 파일형태로 존재, 언제든지 시스템에 연결 및 분리 가능

## 2. 파티션(Partition)

### 2.1. 개념

디스크 공간을 논리적인 별도의 데이터영역으로 분할한 공간

하나의 물리적인 디스크 저장장치를 여러 독립적인 공간으로 구분해 놓은 것

백업 및 관리 등을 원활히 하기위해 사용

리눅스는 최소 2개 이상의 파티션을 사용

파티션 마다 독립적인 파일 시스템 운영 → 부팅 시간 단축

특정 파티션의 파일 시스템이 손상되어도 다른 파티션에 영향 X → 안정성 높음

![Untitled](LVM%20(%E1%84%8C%E1%85%A5%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8E%E1%85%B5%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5)%2049f98e941f484347be899865b7e88371/Untitled.png)

### 2.2. 종류

1. MBR: Master Boot Recoder
    - 디스크에서 가장 먼저 읽히는 부분
    - 디스크의 전체적인 관리를 함
    - 주 파티션마다 각각의 부트섹터(BootSector)가 할당되는데, 이럴 경우 컴퓨터가 어느곳의 부트섹터를 읽어서 부팅을 해야할지 모름. 따라서 운영체제를 설치하게 되면 디스크에서 가장 먼저 읽히는 MBR에 자신의 부트레코더(Boot Recoder)를 기록하여 자기가 실행하게 됨
2. 주 파티션(Primary Partition)
    - 파티션 앞에 부트섹터가 할당되어서 운영체제를 설치할 수 있음
        - 주 파티션에 운영체제를 설치하면 부트섹터에 부트레코더를 기록하게 되고 MBR에도 기록
    - 최대 4개 생성 가능
    - 파티션 번호는 1~4번 할당
    - 4개 이상의 파티션이 필요할 시 주 파티션 3개, 확장 파티션 1개를 설정해 논리 파티션을 통해 추가 파티션 생성 가능
    - 활성 주 파티션(Activate Primary)
        - MBR에 부트레코더가 기록된 파티션
3. 확장 파티션(Extended Partition)
    - 논리적 파티션으로 세분화 시킬 수 있는 공간
    - 실제 데이터를 담는 영역이 아니기 때문에 파일시스템 형식도 지정하지 못하고 마운트도 불가능
    - 1개만 생성 가능
    - 주 파티션 중에서 하나를 선택해서 사용
    - 4개의 논리 파티션을 가질 수 있음
4. 논리 파티션(Logical Partition)
    - 확장 영역이 갖는 범위 안에서 생성되는 파티션
    - 주 파티션과 마찬가지로 실제 데이터 저장 가능
    - 부트섹터가 없으므로 운영체제 설치가 불가능한 파티션
    - 파티션 번호는 5번 이후부터 할당
5. 스왑 파티션(Swap Partition)
    - 디스크의 일부를 메모리처럼 사용하는 영역
    - 주 파티션 or 논리 파티션에 생성
    - 부족한 메모리 용량을 하드디스크로 대신함
    - LINUX 설치 시 반드시 설치해야 함

### 2.3. 디스크 장치명

분할된 파티션은 디스크의 장치 파일명 뒤에 숫자를 붙임

리눅스에서 파티션을 만들고 마운트할 때 지정된 디바이스명을 사용

- sd: SCSI or USB 방식 디스크
- hd: IDE or ATA 방식 디스크
- fd: 플로피 디스크
- scd or sr: CD-ROM
- xd: XT 디스크

## 3. 파일 시스템

운영체제가 시스템의 디스크 파티션 상에 파일을 구성하는 방식

파일을 일정 규칙으로 저장하기 위해 규정 방식을 제시

이 체계가 있어야만 파일을 읽고 쓸 수 있음

## 4. 볼륨

단일 파일 시스템을 사용하여 엑세스 할 수 있는 저장 공간

파일 시스템으로 포맷된 디스크상의 저장영역 (USB를 인식시키면 볼륨 하나가 인식됨)

볼륨은 디스크의 단일 파티션에 상주하게 되며 파티션보다 논리적으로 유동적임

LVM은 하나의 디스크를 여러 개의 파티션으로 나누어 사용함. 이 때 볼륨은 파티션마다 하나씩 존재하기도 하고, 여러 파티션에 하나만 존재할 수도 있음

일반적으로 디스크를 파티션으로 구분하고, 각 파티션을 파일 시스템으로 포맷하여 볼륨을 만들어 사용

---

# LVM

## 개념

LVM(Logical Volume Manager)는 하나의 디스크를 논리적으로 나누어 사용하거나, 여러개의 디스크를 논리적으로 묶어서 사용하는 등, 리눅스에서 디스크를 효율적으로 관리하기 위한 방법이다.

![Untitled](LVM%20(%E1%84%8C%E1%85%A5%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8E%E1%85%B5%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5)%2049f98e941f484347be899865b7e88371/Untitled%201.png)

![Untitled](LVM%20(%E1%84%8C%E1%85%A5%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8E%E1%85%B5%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5)%2049f98e941f484347be899865b7e88371/Untitled%202.png)

## 기능

리눅스에서 디스크를 사용하는 방법은 가장 기본적으로 디스크를 파티션으로 나누어 각각의 디렉토리에 파일 시스템으로 마운트 한 뒤 지정된 위치에 데이터를 저장해서 사용하게 된다.
(디스크 → 파티션 → 파일시스템 (/home))

LVM은 커널에 구현된 기능으로 디스크를 좀 더 효율적으로 사용할 수 있다. LVM은 볼륨이라는 단위로 저장장치를 다루며 물리 디스크를 볼륨 그룹으로 묶어 다시 논리 볼륨으로 나누어 파일 시스템을 만든다.
(디스크 → 파티션 → 볼륨그룹 → 논리볼륨 → 파일시스템 (/home))

LVM을 적용하게 되면 디스크를 변경, 추가할 때 물리적인 부분을 건드릴 필요가 없어 여러 디스크를 하나로 뭉쳐서 사용할 수도 있으며 하나의 디스크를 여러 디스크인 것처럼 나누어 사용할 수 있다. 사용 중인 파티션의 크기를 바꿀 수도 있고 디스크를 추가한 뒤 간단한 작업을 통해 용량을 확장시킬 수 있다.

## 구성

![Untitled](LVM%20(%E1%84%8C%E1%85%A5%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8C%E1%85%A1%E1%86%BC%E1%84%8E%E1%85%B5%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%85%E1%85%B5)%2049f98e941f484347be899865b7e88371/Untitled%203.png)

디스크를 유연하게 사용하기 위해 물리적인 파티션을 논리적인 볼륨으로 바꿔서 사용한다. LVM에서는 여러 파티션을 하나의 논리적인 볼륨그룹으로 묶은 뒤 다시 필요한 크기만큼 나눠서 사용할 수 있다.

- PV (Physical Volume)
    - 물리적 볼륨으로, 디스크를 LVM에서 사용할 수 있게 변환하는 작업을 말한다. 디스크의 파티션을 PV로 초기화시켜 일정한 크기의 PE(Physical Extent)로 구성된다.
- PE (Physical Extent)
    - PV에서 나누어 사용하는 블록이다. 보통 1PE의 크기는 4MB이며, VG가 새롭게 나누는 논리적인 LV의 LE와 1:1 대응한다.
- VG (Volume Group)
    - PV가 모여 만들어진 그룹을 말한다. 물리적인 일정한 크기의 PE로 구성된 PV들이 모여 VG가 만들어진다. VG는 다시 LV로 할당할 수 있는 공간을 말하기도 한다.
- LV (Logical Volume)
    - VG에서 사용자가 필요한 만큼 할당돼서 만들어지는 공간이다. 논리적인 파티션이라고 볼 수 있으며 이는 다시 LE로 나누어진다.
- LE (Logical Extent)
    - LV가 나누어진 일정한 크기의 블록으로 물리적 크기인 PE와 1:1 대응한다.

---

## 참고

[디스크(Disk) /파티션(Partition) / 볼륨(Volum) / 파일시스템 용어정리](https://pearlluck.tistory.com/179)

[디스크(Disk), 파티션(Partition)과 볼륨(Volume)의 차이](https://soft.plusblog.co.kr/46)

[파티션(Partition)의 개념](https://dakuo.tistory.com/60)

[[11. 파티션]](https://chloro.tistory.com/97)

[파티션(Partition) - Primary Partition, Extended Partition, Logical Partition](https://yunjipark0623.tistory.com/entry/%ED%8C%8C%ED%8B%B0%EC%85%98Partition-Primary-Partition-Extended-Partition-Logical-Partition)

[파티션(Partition)](https://velog.io/@mdev97/%ED%8C%8C%ED%8B%B0%EC%85%98Partition)

[[리눅스] LVM 과 RAID 개념](https://wiseworld.tistory.com/32)

[[Born2beRoot] 뭐가 뭔지 모르겠지만 아무튼 정리하는 글](https://velog.io/@welloff_jj/Born2beRoot-%EB%AD%90%EA%B0%80-%EB%AD%94%EC%A7%80-%EB%AA%A8%EB%A5%B4%EA%B2%A0%EC%A7%80%EB%A7%8C-%EC%95%84%EB%AC%B4%ED%8A%BC-%EC%A0%95%EB%A6%AC%ED%95%98%EB%8A%94-%EA%B8%80)